<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!--Description-->

    

    
        <meta name="description" content="JavaScript: 理解this是很容易引言本文将介绍JavaScript的另一个基本但同样被误解的方面，称为this关键字。
好吧，让我们开始吧。在本文的结尾，您应该对以下内容有更好的了解，
在JavaScript中this是什么。

如何使this听起来比以往更少混乱
this的规则及其用法"/>
    

    <!--Author-->
    
        <meta name="author" content="Woodjobber"/>
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="JavaScript: 理解this是很容易"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="JavaScript: 理解this是很容易引言本文将介绍JavaScript的另一个基本但同样被误解的方面，称为this关键字。
好吧，让我们开始吧。在本文的结尾，您应该对以下内容有更好的了解，
在JavaScript中this是什么。

如何使this听起来比以往更少混乱
this的规则及其用法"/>
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="Woodjobber"/>

    <!--Type page-->
    
        <meta property="og:type" content="article"/>
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="http://yoursite.comhttp://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg"/>
    

        <meta name="twitter:card" content="summary_large_image"/>

    

    
        <meta name="twitter:image" content="http://yoursite.comhttp://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg"/>
    

    <!-- Title -->
    
    <title>JavaScript: 理解this是很容易 - Woodjobber</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet"/>

    <!-- Google Analytics -->
    


    <!-- favicon -->
    

<meta name="generator" content="Hexo 5.4.0"></head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">啄木鸟</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a target="_blank" rel="noopener" href="https://github.com/woodjobber">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('http://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>JavaScript: 理解this是很容易</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2021-04-04
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p><img src="https://gitee.com/woodjobbeer/picgo/raw/master/pics/20210404183144.png" alt="image-20210404183144709"></p>
<h1 id="JavaScript-理解this是很容易"><a href="#JavaScript-理解this是很容易" class="headerlink" title="JavaScript: 理解this是很容易"></a>JavaScript: 理解this是很容易</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>本文将介绍JavaScript的另一个基本但同样被误解的方面，称为<code>this</code>关键字。</p>
<p>好吧，让我们开始吧。在本文的结尾，您应该对以下内容有更好的了解，</p>
<p>在JavaScript中<code>this</code>是什么。</p>
<ul>
<li>如何使<code>this</code>听起来比以往更少混乱</li>
<li><code>this</code>的规则及其用法。</li>
<li>重要的是，<code>this</code>很容易！</li>
</ul>
<h2 id="冗长的文章阅读提醒"><a href="#冗长的文章阅读提醒" class="headerlink" title="冗长的文章阅读提醒"></a>冗长的文章阅读提醒</h2><p>与本系列的其他文章不同，该文章将有些冗长。看完几本教程后，我觉得应该将各个方面联系起来，以很好地理解<code>this</code>一概念。例如，<code>call</code> =&gt; <code>apply</code> =&gt; <code>bind</code>的概念与理解<code>this</code>关键字非常相关。我们需要一起讨论。</p>
<p>我可以将其分解为多篇文章，但是最好将它们放在一起，因为这些概念是相互关联的。</p>
<p>带上您最喜欢的饮料，放松身心，然后开始阅读。我相信您一定会喜欢的。</p>
<h2 id="this是什么？"><a href="#this是什么？" class="headerlink" title="this是什么？"></a><code>this</code>是什么？</h2><p><code>this</code>是JavaScript中的关键字，它的存在是为了允许我们，</p>
<ul>
<li>在不同的上下文中重用函数。</li>
<li>标识在调用方法时要关注的对象。</li>
</ul>
<p>请记住，在JavaScript中创建执行上下文时，它会创建一个称为<code>this</code>的特殊实体。</p>
<p>在全局执行上下文中，这等于全局对象<code>window</code>。</p>
<p>在函数执行上下文中，默认情况下，<code>this</code>等于<code>window</code>对象，但是行为根据称为绑定的现象而改变。不要将其与JavaScript中的<code>bind()</code>方法混淆。 <code>bind()</code>方法只是绑定内容的另一种方法。还有更多。我们将在一段时间内看到它，并且<code>this</code> 90％的用法都围绕它。</p>
<h2 id="this的规则"><a href="#this的规则" class="headerlink" title="this的规则"></a><code>this</code>的规则</h2><p>理解函数的<code>this</code>关键字可能具有挑战性，因为它在JavaScript中的行为不同于其他语言。当涉及到这一点时，要问的重要问题是，</p>
<blockquote>
<p>该函数在哪里调用？在调用函数之前，我们不知道<code>this</code>关键字中包含什么。</p>
</blockquote>
<p><code>this</code>的用法可以分为四个不同的绑定方面。</p>
<h2 id="隐私绑定（Implicit-binding）"><a href="#隐私绑定（Implicit-binding）" class="headerlink" title="隐私绑定（Implicit binding）"></a>隐私绑定（Implicit binding）</h2><p>隐式绑定涵盖了我们使用<code>this</code>关键字处理的大多数用例。在隐式绑定中，在调用时与函数相邻的<code>dot(.)</code>运算符的左侧确定<code>this</code>对象绑定到什么。</p>
<p>这里有一个例子，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = &#123;</span><br><span class="line">    name: <span class="string">&#x27;GreenRoots&#x27;</span>,</span><br><span class="line">    address: <span class="string">&#x27;HashNode&#x27;</span>,</span><br><span class="line">    getName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">user.getName();</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong>：在上面的示例中，<code>this</code>绑定到<code>user</code>对象，与函数<code>getName()</code>相邻的<code>dot(.)</code>运算符的左侧是<code>user</code>对象。因此，<code>this.name</code>将在控制台中记录<code>GreenRoots</code>。</p>
<p>让我们再举一个例子来更好地解释这个概念，</p>
<p>例如：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decorateLogName</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">      obj.logName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> tom = &#123;</span><br><span class="line">      name: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">      age: <span class="number">7</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> jerry = &#123;</span><br><span class="line">      name: <span class="string">&#x27;jerry&#x27;</span>,</span><br><span class="line">      age: <span class="number">3</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  decorateLogName(tom);</span><br><span class="line">  decorateLogName(jerry);</span><br><span class="line"></span><br><span class="line">  tom.logName();</span><br><span class="line">  jerry.logName();</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong>：在上面的示例中，我们有两个对象，<code>tom</code>和<code>jerry</code>。我们通过附加一个名为<code>logName()</code>的方法来修饰（增强）这些对象。</p>
<p>请注意，当我们调用<code>tom.logName()</code>时，与函数<code>logName()</code>相邻的<code>dot(.)</code>运算符的左侧是<code>tom</code>对象。因此，<code>this</code>绑定到<code>tom</code>对象，并记录值<code>tom</code>（<code>this.name</code>等于<code>tom</code>）。调用<code>jerry.logName()</code>时，同样适用。</p>
<p>够清楚了吗？好！现在，让我们以JavaScript类为例，它只是一个函数，但是我们可以创建它的不同实例，</p>
<p><strong>例如：</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Cartoon = <span class="function"><span class="keyword">function</span> (<span class="params">name, age, friend</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">          name: name,</span><br><span class="line">          age: age,</span><br><span class="line">          logName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">          &#125;,</span><br><span class="line">          friend: &#123;</span><br><span class="line">              name: friend,</span><br><span class="line">              logName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> tom = Cartoon(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">7</span>, <span class="string">&#x27;Jerry&#x27;</span>);</span><br><span class="line">  tom.logName(); <span class="comment">// Should print &#x27;Tom&#x27;</span></span><br><span class="line">  tom.friend.logName(); <span class="comment">// Should print &#x27;Jerry&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong>在这里，我们有一个名为<code>Cartoon</code>的类。卡通有一个名为<code>logName()</code>的方法。它也有一个叫做<code>friend</code>的属性，它是一个对象。为了使事情有些棘手，对象<code>friend</code>也有一个名为<code>logName()</code>的方法。</p>
<p>实例化<code>Cartoon</code>类后，我们得到一个名为<code>tom</code>的实例，该实例传递名称，即<code>Tom</code>，<code>age</code>为7，而<code>friend</code>的名为<code>Jerry</code>。</p>
<p>调用<code>tom.logName()</code>时，与函数<code>logName()</code>相邻的<code>dot(.)</code>运算符的左侧是<code>tom</code>，并且<code>this</code>绑定<code>tom</code>。因此，这里的<code>this.name</code>指向<code>tom</code>的名字，我们之前以<code>tom</code>的名字传递它。</p>
<p>调用<code>tom.friend.logName()</code>时，与函数<code>logName()</code>相邻的<code>dot(.)</code>运算符的左侧为<code>friend</code>。因此，<code>this</code>指向对象<code>friend</code>，<code>this.name</code>是对象<code>friend</code>的名字，即<code>Jerry</code>。</p>
<p>我希望我们充分理解隐式绑定的规则和逻辑以应用和实现它。让我们继续前进。</p>
<h2 id="显式绑定-Explicit-binding"><a href="#显式绑定-Explicit-binding" class="headerlink" title="显式绑定(Explicit binding)"></a>显式绑定(Explicit binding)</h2><p>我们知道，JavaScript创建了一个环境来执行我们编写的代码。该环境包含的内容超出了我们编写的实际代码。</p>
<p>在创建阶段，它负责为变量，函数，对象等创建内存。最后，在执行阶段执行代码。这种特殊的环境称为JavaScript执行上下文。您可以从<a target="_blank" rel="noopener" href="https://blog.greenroots.info/understanding-javascript-execution-context-like-never-before-ckb8x246k00f56hs1nefzpysq">这里</a>阅读更多有关它的信息。</p>
<p>JavaScript应用程序中有许多这样的环境（执行上下文）。每个执行上下文彼此独立地操作。但是有时，我们可能希望使用从一个执行上下文到另一个执行上下文的东西。这就是显式绑定起作用的地方。我们可以将内容从一个上下文绑定到另一环境的上下文中，以使用<code>this</code>上下文执行。</p>
<blockquote>
<p>在显式绑定中，我们可以在对象的执行上下文之外调用带有对象的函数。</p>
</blockquote>
<p>共有三种非常规方法，<code>call()</code>，<code>apply()</code>和<code>bind()</code>有助于实现显式绑定。</p>
<h2 id="call-方法"><a href="#call-方法" class="headerlink" title="call()方法"></a><code>call()</code>方法</h2><p>使用<code>call()</code>方法，必须将调用函数的上下文作为参数传递给call()。让我们看一个例子，</p>
<p>例如：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">var</span> user = &#123;</span><br><span class="line">   name: <span class="string">&#x27;GreenRoots&#x27;</span>,</span><br><span class="line">   address: <span class="string">&#x27;HashNode&#x27;</span>  </span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> getName.call(user);</span><br></pre></td></tr></table></figure>
<p>说明：我们在这里看到的是，<code>getName()</code>的函数上调用了<code>call()</code>方法。 <code>getName()</code>函数仅仅记录<code>this.name</code>。但是，这里的<code>this</code>是什么？这取决于传递给<code>call()</code>方法的内容。</p>
<p>在这里，<code>this</code>将绑定到<code>user</code>对象，因为我们已经将<code>user</code>作为参数传递给<code>call()</code>方法。因此，<code>this.name</code>应该记录<code>user</code>对象的<code>name</code>属性的值，即<code>GreenRoots</code>。</p>
<p>在上面的示例中，我们仅将一个参数传递给<code>call()</code>。但是，如果需要，我们可以将多个参数传递给<code>call()</code>。让我们再举一个例子来了解这一点，</p>
<p>例如</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params">hobby1, hobby2</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27; likes &#x27;</span> + hobby1 + <span class="string">&#x27; , &#x27;</span> + hobby2);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">var</span> user = &#123;</span><br><span class="line">   name: <span class="string">&#x27;Tapas&#x27;</span>,</span><br><span class="line">   address: <span class="string">&#x27;Bangalore&#x27;</span>  </span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> hobbies = [<span class="string">&#x27;Swimming&#x27;</span>, <span class="string">&#x27;Blogging&#x27;</span>];</span><br><span class="line"> getName.call(user, hobbies[<span class="number">0</span>], hobbies[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong>注意，我们在这里在<code>call()</code>方法中传递了另外两个参数。第一个参数必须是必须使用该函数调用的对象上下文。其他参数可能只是要使用的值。在这里，我将<code>Swimming</code>和<code>Blogging</code>作为两个参数传递给<code>getName()</code>函数。 您在这里注意到痛点了吗？在使用<code>call()</code>的情况下，参数必须一个接一个地传递，这不是一种明智的处理方式！这就是我们的下一个方法<code>apply()</code>讲解的。</p>
<h2 id="apply-方法"><a href="#apply-方法" class="headerlink" title="apply() 方法"></a><code>apply()</code> 方法</h2><p>可以通过另一种名为<code>apply()</code>的替代方法来解决将参数传递给<code>call()</code>方法的麻烦方法。它与<code>call()</code>相同，但允许更方便地传递参数。看一看，</p>
<p>例如</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params">hobby1, hobby2</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27; likes &#x27;</span> + hobby1 + <span class="string">&#x27; , &#x27;</span> + hobby2);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">var</span> user = &#123;</span><br><span class="line">   name: <span class="string">&#x27;Tapas&#x27;</span>,</span><br><span class="line">   address: <span class="string">&#x27;Bangalore&#x27;</span>  </span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> hobbies = [<span class="string">&#x27;Swimming&#x27;</span>, <span class="string">&#x27;Blogging&#x27;</span>];</span><br><span class="line"> getName.apply(user, hobbies);</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong>如您在此处看到的，我们可以将数组作为参数传递，这比逐个传递要方便得多。</p>
<blockquote>
<p>当您只传递一个值参数或没有值参数时，请使用<code>call()</code>。当您有多个要传递的值参数时，请使用<code>apply()</code>。</p>
</blockquote>
<h2 id="bind-方法"><a href="#bind-方法" class="headerlink" title="bind() 方法"></a><code>bind()</code> 方法</h2><p><code>call()</code>方法通过传递<code>this</code>上下文来调用该函数。 <code>bind()</code>方法与<code>call()</code>类似，但是<code>bind()</code>不会直接调用该函数，而是返回一个全新的函数，我们可以调用它。</p>
<p>例如</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params">hobby1, hobby2</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27; likes &#x27;</span> + hobby1 + <span class="string">&#x27; , &#x27;</span> + hobby2);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">var</span> user = &#123;</span><br><span class="line">   name: <span class="string">&#x27;Tapas&#x27;</span>,</span><br><span class="line">   address: <span class="string">&#x27;Bangalore&#x27;</span>  </span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> hobbies = [<span class="string">&#x27;Swimming&#x27;</span>, <span class="string">&#x27;Blogging&#x27;</span>];</span><br><span class="line"> <span class="keyword">var</span> newFn = getName.bind(user, hobbies[<span class="number">0</span>], hobbies[<span class="number">1</span>]); </span><br><span class="line"></span><br><span class="line"> newFn();</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong>如上所述，<code>getName.bind()</code>不会调用函数<code>getName()</code>。它返回一个新函数<code>newFn</code>，我们可以像<code>newFn()</code>那样调用它。</p>
<h2 id="new-绑定"><a href="#new-绑定" class="headerlink" title="new 绑定"></a><code>new</code> 绑定</h2><p>使用<code>new</code>关键字创建一个构造函数。这是一个构造函数的例子，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Cartoon = <span class="function"><span class="keyword">function</span>(<span class="params">name, animal</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">this</span>.name = name;</span><br><span class="line">     <span class="built_in">this</span>.animal = animal;</span><br><span class="line">     <span class="built_in">this</span>.log = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="built_in">this</span>.name +  <span class="string">&#x27; is a &#x27;</span> + <span class="built_in">this</span>.animal);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p>我们可以使用<code>new</code>关键字创建对象，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tom = <span class="keyword">new</span> Cartoon(<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Cat&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> jerry = <span class="keyword">new</span> Cartoon(<span class="string">&#x27;Jerry&#x27;</span>, <span class="string">&#x27;Mouse&#x27;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>构造函数的<code>new</code>绑定规则规定，当使用<code>new</code>关键字调用函数时，函数内的<code>this</code>关键字绑定到正在构造的新对象。</p>
</blockquote>
<p>听起来复杂吗？好吧，让我们分解一下。走这条线，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tom = <span class="keyword">new</span> Cartoon(<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;Cat&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>在这里，函数<code>Cartoon</code>是通过<code>new</code>关键字调用的。因此，<code>this</code>将绑定到此处创建的新对象<code>tom</code>。</p>
<h2 id="全局对象绑定"><a href="#全局对象绑定" class="headerlink" title="全局对象绑定"></a>全局对象绑定</h2><p>该代码执行的输出是什么？<code>this</code>绑定到这里是什么？</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sayName = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// &#x27;use strict&#x27;;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.name = <span class="string">&#x27;Tapas&#x27;</span>;</span><br><span class="line">sayName();</span><br></pre></td></tr></table></figure>
<p>如果<code>this</code>关键字未通过上述任何绑定（<code>隐式</code>，<code>显式</code>或<code>new</code>绑定）解析，则<code>this</code>绑定到<code>window</code>（<code>global</code>）对象。</p>
<h2 id="箭头函数，没有绑定吗？"><a href="#箭头函数，没有绑定吗？" class="headerlink" title="箭头函数，没有绑定吗？"></a>箭头函数，没有绑定吗？</h2><p>ES6引入了<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">箭头函数</a>，这些功能不提供自己的<code>this</code>绑定。到目前为止，我们已经看到，在常规函数中，<code>this</code>关键字表示调用该函数的对象，该对象可以是<code>window</code>，文档，用户定义的对象或任何其他内容。</p>
<blockquote>
<p>使用箭头函数时，<code>this</code>关键字始终代表定义了箭头函数的对象。</p>
</blockquote>
<p>箭头函数使用词法作用域，“ <code>this</code>”是指其当前的作用域。箭头函数不绑定自己的作用域，而是从父级继承它。</p>
<p>时间示例。让我们看看它是的工作。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> testHobbies = &#123;</span><br><span class="line">  hobbies: [<span class="string">&#x27;Cricket&#x27;</span>, <span class="string">&#x27;Football&#x27;</span>, <span class="string">&#x27;Blogging&#x27;</span>],</span><br><span class="line">  name: <span class="string">&#x27;Alex&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">logHobbies</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">     <span class="built_in">this</span>.hobbies.forEach(<span class="function">(<span class="params">elem</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> knows <span class="subst">$&#123;elem&#125;</span>`</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这里，<code>logHobbies()</code>方法遍历这些兴趣爱好并将其记录到控制台中。注意，我们在<code>forEach</code>中使用箭头函数。箭头函数内部的<code>this</code>将绑定到对象<code>testHobbies</code>，因为箭头函数没有此绑定，并且始终绑定到父对象。</p>
<p>因此，调用<code>testHobbies.logHobbies()</code>将正确记录为：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Alex knows Cricket</span><br><span class="line">Alex knows Football</span><br><span class="line">Alex knows Blogging</span><br></pre></td></tr></table></figure>
<p>现在让我们改变一下。请注意我在下面所做的修改。 <code>for-each</code>使用常规函数代替箭头函数。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> testHobbies = &#123;</span><br><span class="line">  hobbies: [<span class="string">&#x27;Cricket&#x27;</span>, <span class="string">&#x27;Football&#x27;</span>, <span class="string">&#x27;Blogging&#x27;</span>],</span><br><span class="line">  name: <span class="string">&#x27;Alex&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">logHobbies</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.hobbies.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> knows <span class="subst">$&#123;elem&#125;</span>`</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>您怎么看，<code>this</code>将绑定到<code>forEach</code>中？它不是箭头函数。它是一个常规函数，并且具有自己的执行上下文。在该执行上下文中，找不到一个叫<code>name</code>。因此，<code>this.name</code>是<code>undefined</code>。</p>
<p>因此将输出</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span> knows Cricket</span><br><span class="line"><span class="literal">undefined</span> knows Football</span><br><span class="line"><span class="literal">undefined</span> know Blogging</span><br></pre></td></tr></table></figure>
<p>我们将在以后有关<code>Scope</code>和<code>闭包</code>的文章中更详细地介绍它。</p>
<h2 id="使用严格模式和this"><a href="#使用严格模式和this" class="headerlink" title="使用严格模式和this"></a>使用严格模式和this</h2><p>通常，在全局作用域内，<code>this</code>关键字指的是<code>window</code>对象，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>);  <span class="comment">//returns window object.</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>同样在JavaScript严格模式下，全局作用域内的<code>this</code>关键字返回<code>window</code>对象。但是，它在函数作用域内的行为有所不同。</p>
<p>看下面例子</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">        <span class="string">&quot;use strict;&quot;</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">testThis</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">            &quot;use strict&quot;</span>;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;testThis&#x27;</span>, <span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        testThis();</span><br><span class="line">    &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>它将在控制台中记录以下输出，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Window &#123;<span class="attr">parent</span>: Window, <span class="attr">opener</span>: <span class="literal">null</span>, <span class="attr">top</span>: Window, <span class="attr">length</span>: <span class="number">0</span>, <span class="attr">frames</span>: Window, …&#125;</span><br><span class="line">testThis <span class="literal">undefined</span></span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>是的，<code>this</code>很容易理解！但是同时，理解<code>this</code>规则和用法可能会很困难。当我们专注于以下问题时，我们将更好地理解<code>this</code>一点：在哪里调用函数？ 在大多数情况下，将与隐式绑定一起使用。显式绑定将与<code>call()</code>，<code>apply()</code>和<code>bind()</code>一起使用。在许多基于JavaScript的框架（如Reactjs，Angular等）中，我们使用箭头函数。 只需注意，只要您理解并实践了这些规则，我相信您会同意<code>this</code>确实很容易使用！</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>翻译来自<a target="_blank" rel="noopener" href="https://blog.greenroots.info/javascript-this-is-easy-and-what-do-you-need-to-know-about-it-ckca1pqqr00gmmns13n921wib">JavaScript: this is easy and what do you need to know about it!</a></p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/woodjobber" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2021 Woodjobber
                <!-- <a href="http://www.beian.miit.gov.cn/"  style="color:#f72b07" target="_blank">你自己的备案号</a> -->
                <br>
                </p>
                <!--
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p> 
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
                -->
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>