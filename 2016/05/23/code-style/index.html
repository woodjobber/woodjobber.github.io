<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>良好代码风格是一种艺术 -- Objective-C | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="简介作者写这篇文章的目的不是提供死板的规定，仅仅是建议，提供给开发者之间降低阅读代码的障碍。优秀的代码应该具备：代码简洁简明，代码自我翻译等特点。我一直认为–良好代码规范优先于性能。  编程规范点语法对于getter,setter属性尽量使用点（.）语法(除了在init和dealloc方法中，应该直接使用实例变量，至于原因稍后解释)。 Preferred: 123view.backgroundCo">
<meta property="og:type" content="article">
<meta property="og:title" content="良好代码风格是一种艺术 -- Objective-C">
<meta property="og:url" content="http://yoursite.com/2016/05/23/code-style/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="简介作者写这篇文章的目的不是提供死板的规定，仅仅是建议，提供给开发者之间降低阅读代码的障碍。优秀的代码应该具备：代码简洁简明，代码自我翻译等特点。我一直认为–良好代码规范优先于性能。  编程规范点语法对于getter,setter属性尽量使用点（.）语法(除了在init和dealloc方法中，应该直接使用实例变量，至于原因稍后解释)。 Preferred: 123view.backgroundCo">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://i.imgur.com/TUz7oc9.jpg">
<meta property="og:updated_time" content="2016-05-29T08:39:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="良好代码风格是一种艺术 -- Objective-C">
<meta name="twitter:description" content="简介作者写这篇文章的目的不是提供死板的规定，仅仅是建议，提供给开发者之间降低阅读代码的障碍。优秀的代码应该具备：代码简洁简明，代码自我翻译等特点。我一直认为–良好代码规范优先于性能。  编程规范点语法对于getter,setter属性尽量使用点（.）语法(除了在init和dealloc方法中，应该直接使用实例变量，至于原因稍后解释)。 Preferred: 123view.backgroundCo">
<meta name="twitter:image" content="http://i.imgur.com/TUz7oc9.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-code-style" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/23/code-style/" class="article-date">
  <time datetime="2016-05-22T17:14:07.000Z" itemprop="datePublished">2016-05-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      良好代码风格是一种艺术 -- Objective-C
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>作者写这篇文章的目的不是提供死板的规定，仅仅是建议，提供给开发者之间降低阅读代码的障碍。优秀的代码应该具备：<strong>代码简洁简明</strong>，<strong>代码自我翻译</strong>等特点。我一直认为–<strong>良好代码规范优先于性能</strong>。</p>
<hr>
<h1 id="编程规范"><a href="#编程规范" class="headerlink" title="编程规范"></a>编程规范</h1><h2 id="点语法"><a href="#点语法" class="headerlink" title="点语法"></a>点语法</h2><p>对于<code>getter</code>,<code>setter</code>属性尽量使用点（<code>.</code>）语法(除了在<code>init</code>和<code>dealloc</code>方法中，应该直接使用<code>实例变量</code>，至于原因稍后解释)。</p>
<p>Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">view.backgroundColor = [UIColor redColor];</span><br><span class="line">[UIApplication sharedApplication].delegate;</span><br></pre></td></tr></table></figure>
<p>Not Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[view setBackgroundColor:[UIColor redColor]];</span><br><span class="line">   UIApplication.sharedApplication.delegate;</span><br></pre></td></tr></table></figure>
<h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><p>条件语句体应该总是被花括号<code>{}</code>包裹，包括仅仅只有一句代码，且都不能省略，<code>if</code>与左圆括弧<code>(</code>之间有一个<code>空格</code>，右圆括弧<code>）</code>与左花括号<code>{</code>之间有一个<code>空格</code>。多条件判断的时候，可以先判断否定的情况。</p>
<p>Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">if (!isVaild) &#123;</span><br><span class="line">	return NO;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (!isVaild) &#123;return NO;&#125;</span><br></pre></td></tr></table></figure>
<p>Not Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">if (!isVaild) </span><br><span class="line">return NO;</span><br></pre></td></tr></table></figure>
<p>Or</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">if (!isVaild) return NO;</span><br></pre></td></tr></table></figure>
<p>Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (BOOL)isValidUser:(User *)user &#123;</span><br><span class="line">	if (!user.name) &#123;return NO;&#125;</span><br><span class="line">	if (!user.password) &#123;return NO;&#125;</span><br><span class="line">	if (!user.email) &#123;return NO;&#125;</span><br><span class="line"></span><br><span class="line">	return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Or</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (BOOL)isValidUser:(User *)user &#123;</span><br><span class="line">	BOOL isValidForName = user.name;</span><br><span class="line">	BOOL isValidForPassword = user.password;</span><br><span class="line">	BOOL isValidForEmail = user.email;</span><br><span class="line">	BOOL isInValid = !isValidForName || !isValidForPassword || !isValidForEmail;</span><br><span class="line">	if (isInValid) &#123;</span><br><span class="line">		return NO;</span><br><span class="line">	&#125;</span><br><span class="line">	//其他条件</span><br><span class="line">	return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Not Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (BOOL)isValidUser:(User *)user &#123;</span><br><span class="line">	BOOL isValid = NO;</span><br><span class="line">	if (user.name)</span><br><span class="line">	&#123;</span><br><span class="line">		if (user.password) </span><br><span class="line">		&#123;</span><br><span class="line">		</span><br><span class="line">			if (usr.email) &#123;</span><br><span class="line">				isValid = YES;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	retrun isValid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="尤达表达式"><a href="#尤达表达式" class="headerlink" title="尤达表达式"></a>尤达表达式</h2><p>最好不要使用<code>尤达表达式</code>。<code>尤达表达式</code>是指，<code>比较者</code>与<code>被比较者</code>之间的前后关系，<code>不要</code>用<code>比较者</code>与<code>被比较者</code>相比较 <code>而是</code> 应该用<code>被比较者</code>与<code>比较者</code>相比较。简单说，就是<code>用</code> <code>变量</code>与    <code>参照物</code>相比较，而<code>不</code>是<code>参照物</code>与<code>变量</code>相比较。</p>
<p>Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">id value = ?;//？代表某一个对象</span><br><span class="line">if ([value isEqual:@12]) &#123;</span><br><span class="line">	//code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Not preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">if (@12 isEqual:value) &#123;</span><br><span class="line">	//code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h2><p>当三元运算符的第二个参数的返回值与检查对象一致时，这样使用：</p>
<p>Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">result = obj?:[self callOtherMethod];</span><br></pre></td></tr></table></figure>
<p>Not Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">result = obj? obj : [self callOtherMethod];</span><br></pre></td></tr></table></figure>
<h2 id="字面值"><a href="#字面值" class="headerlink" title="字面值"></a>字面值</h2><p>对于字面值我们应该使用<code>NSString</code>,<code>NSDictionary</code>,<code>NSArray</code>，<code>NSNumber</code>的简写形式来创建对象。</p>
<p>Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NSArray *cities = @[@&quot;成都&quot;，@&quot;北京&quot;,@&quot;上海&quot;];</span><br><span class="line">NSDictionary *productPrice = @&#123;@&quot;iPhone5&quot;:@&quot;4300&quot;,@&quot;iPhone6&quot;:@&quot;4800&quot;&#125;;</span><br><span class="line">NSNumber *age = @23;</span><br></pre></td></tr></table></figure>
<p>Not Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NSArray *cities = [NSArray arrayWithObjects:@&quot;成都&quot;,@&quot;北京&quot;,@&quot;上海&quot;,nil];</span><br><span class="line">NSDicitionary *productPrice = [NSDictionary dictionaryWithObjectsAndKeys:@&quot;4300&quot;,@&quot;iPhone5&quot;,@&quot;4800&quot;,@&quot;iPhone&quot;];</span><br></pre></td></tr></table></figure>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>对于方法应该遵循苹果的规范，(<code>-/+</code>)应该与左圆括弧<code>(</code>有一个<code>空格</code>。</p>
<p>Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (void)sendMessage;</span><br></pre></td></tr></table></figure>
<p>Not Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-(void)sendMessage;</span><br></pre></td></tr></table></figure>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@interface Person: NSObject</span><br><span class="line"></span><br><span class="line">@property (nonatomic,copy) NSString *name;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>Not Preferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@interface Person: NSObject &#123;</span><br><span class="line"></span><br><span class="line">	NSString *name;//或NSString *_name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="init-和-dealloc"><a href="#init-和-dealloc" class="headerlink" title="init 和 dealloc"></a>init 和 dealloc</h2><p><code>dealloc</code>方法应该放在实现文件的顶部，直接放在<code>@sythesize</code> 和 <code>@dynamic</code>的后面，<code>init</code>方法应该放在<code>dealloc</code>方法的后面。注意<code>init</code>方法里面永远不应该调用<code>setter</code>、<code>getter</code>方法，你应该直接访问<code>实例变量</code>。至于什么原因？在于一个对象只有在<code>init</code>返回之后，才完成初始化状态，只有这样才能说明创建的对象已经处于稳定的状态。同样，在<code>dealloc</code>中，也不能这样做。简单的一句话总结：总是使用<code>self.propery</code>这种形式(出于对内存管理考虑)，<code>切记除了</code>在 <code>init</code>和<code>dealloc</code>方法中，应该直接访问<code>实例变量</code>。原因：</p>
<p>If you’re trying to be as defensive as possible, then you have to operate<br>under the assumption that someone may have subclassed the class and overridden your public methods. These overrides may be assuming that when the method is invoked, all of the properties and ivars and everything are in a consistent and fully-initialized state.</p>
<p>So, if your initializer or dealloc method causes one of these overridden methods to be executed, then the logic of the method may do something incorrect. The best case scenario is that it works as intended. The worst case scenario is that you do something like dereference a NULL pointer or index beyond the bounds of an array or cause some data to become corrupted, etc.`</p>
<p>While you’re inside an initializer or dealloc method, your object is in an inconsistent state. Thus, if you’re trying to be as defensive as possible, you should avoid invoking methods that might be making assumptions about the state of the object.</p>
<p>请参考</p>
<ul>
<li><p><a href="https://github.com/NYTimes/objective-c-style-guide/issues/6" title="Ivars should be directly accessed in init&#39;ers #6" target="_blank" rel="noopener">Ivars should be directly accessed in init’ers #6</a></p>
</li>
<li><p><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6" title="Don’t Use Accessor Methods in Initializer Methods and dealloc" target="_blank" rel="noopener">Don’t Use Accessor Methods in Initializer Methods and dealloc</a></p>
</li>
</ul>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@implement</span><br><span class="line">@sythesize age;</span><br><span class="line">@dynamic name;</span><br><span class="line">- (void)dealloc &#123;</span><br><span class="line">		</span><br><span class="line">&#125;</span><br><span class="line">- (id)init &#123;</span><br><span class="line">	if (self = [super init]) &#123;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">	return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (id)init &#123;</span><br><span class="line">	self = [super init];</span><br><span class="line">	if (self) &#123;</span><br><span class="line">			_name = @&quot;jumei&quot;;</span><br><span class="line">		_age = @&quot;4&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (id)init &#123;</span><br><span class="line"> 	if (self = [super init]) &#123;</span><br><span class="line">		self.name = @&quot;jumei&quot;;</span><br><span class="line">		self.age = @&quot;4&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>顺便提一句，不要在<code>init</code>方法中，初始化耗时的代码，<code>init</code>方法中应该尽可能快速完成初始化并返回。</p>
<h2 id="BOOL-和-nil"><a href="#BOOL-和-nil" class="headerlink" title="BOOL 和 nil"></a>BOOL 和 nil</h2><p><code>变量</code>一定不要直接与<code>YES</code>作比较，至于什么原因?请参考<a href="http://woodjobber.github.io/2016/05/22/Bool/" target="_blank" rel="noopener">BOOL，你真的了解吗？</a></p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">if (!obj) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (obj == nil) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (!isValid) &#123;</span><br><span class="line">&#125;</span><br><span class="line">if (isvalid == NO) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">if (isValid == YES) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="instancetype-amp-id"><a href="#instancetype-amp-id" class="headerlink" title="instancetype &amp; id"></a>instancetype &amp; id</h2><p>在<code>方便构造器</code>中，一定要使用 <code>intancetype</code>，而且在<code>init</code>方法应该多使用<code>instancetype</code>。请参考<a href="http://tewha.net/2013/02/why-you-should-use-instancetype-instead-of-id/" title="为什么应该用intancetype替代id" target="_blank" rel="noopener">为什么应该用intancetype替代id</a></p>
<p>pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (instancetype)initWithName:(NSString)name &#123;</span><br><span class="line"> </span><br><span class="line">	if (self = [super init]) &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return self; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">＋ (instancetype)initWithName:(NSString)name &#123;</span><br><span class="line"> </span><br><span class="line">	if (self = [super init]) &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return self; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Block的循环引用"><a href="#Block的循环引用" class="headerlink" title="Block的循环引用"></a><code>Block</code>的循环引用</h2><p>当使用<code>block</code>时，一定要注意避免引用循环。可以使用<code>@weakify</code>/<code>@strongify</code>。</p>
<p>对于只调用一个方法：</p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">__weak __typeof(self)weakSelf = self;</span><br><span class="line">[self executeBlock:^(NSString *str) &#123;</span><br><span class="line"></span><br><span class="line">	[weakSelf performSomethingWithString:str];</span><br><span class="line"></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>NOt Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[self executeBlock:^(NSString *str) &#123;</span><br><span class="line"></span><br><span class="line">	[self performSomethingWithString:str];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>对于调用多个方法：</p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">__weak __typeof(self)weakSelf = self;</span><br><span class="line">[self executeBlock:^(NSString *str) &#123;</span><br><span class="line">	__strong _typeof(weakSelf) strongSelf = weakSelf;</span><br><span class="line">	if (strongSelf) &#123;</span><br><span class="line">		[strongSelf performSomethingWithString:str];</span><br><span class="line">		[strongSelf performOtherSomethingWithString:str];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">__weak __typeof(self)weakSelf = self;</span><br><span class="line">[self executeBlock:^(NSString *str) &#123;</span><br><span class="line">	[weakSelf performSomethingWithString:str];</span><br><span class="line">	[weakSelf performOtherSomethingWithString:str];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a>命名规范</h1><p>命名注意两点：<strong>可读性</strong>与<strong>命名冲突</strong>。</p>
<h2 id="类命名"><a href="#类命名" class="headerlink" title="类命名"></a>类命名</h2><p>以<code>大写字母</code>作为前缀，可以使用<code>公司缩写</code>或者<code>项目名称缩写</code>。例如以<code>WJUserEnity</code>。形式：<code>大写字母</code>+<code>类名`</code>;命名要清晰，能够描述该类的功能。</p>
<h2 id="常量命名"><a href="#常量命名" class="headerlink" title="常量命名"></a>常量命名</h2><p>常量命名应该以<code>驼峰命名</code>，并以相关的类名作为前缀。形式：<code>类名</code>+<code>属性</code>。</p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">static const CGFloat WJOrderListTableViewCellHeight = 44.0f;</span><br><span class="line"></span><br><span class="line">   NSString *const WJOrderTableViewCellIdentifier = @&quot;WJOrderTableViewCellIdentifier&quot;;</span><br></pre></td></tr></table></figure>
<h2 id="变量命名"><a href="#变量命名" class="headerlink" title="变量命名"></a>变量命名</h2><p>变量命名遵守尽可能描述的清楚,但也不要画蛇添足。形式：修饰词+[类型]。</p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NSString *title;</span><br><span class="line">NSAttributedString *titleAttributedString;</span><br><span class="line">NSDate *lastModifiedDate;</span><br></pre></td></tr></table></figure>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">NSString *titleString;</span><br><span class="line">NSAtttributedString *titleAttributedStr;</span><br><span class="line">NSDate *lastModified;</span><br></pre></td></tr></table></figure>
<h2 id="define命名"><a href="#define命名" class="headerlink" title="#define命名"></a>#define命名</h2><p>以<code>k</code>开头+<code>类名</code>+<code>属性</code>的形式。</p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#define kWJOrderListTableViewCellHeight = 22.0f;</span><br></pre></td></tr></table></figure>
<h2 id="枚举命名"><a href="#枚举命名" class="headerlink" title="枚举命名"></a>枚举命名</h2><p>枚举命名要加相关类名前缀并且枚举值要有枚举类型前缀，最好用<code>NS_ENUM</code></p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger,UIViewAnimationTransition) &#123;</span><br><span class="line">	UIViewAnimationTransitionNone,</span><br><span class="line">	UIViewAnimationTransitonFlipFromLeft,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="方法命名"><a href="#方法命名" class="headerlink" title="方法命名"></a>方法命名</h2><p>方法命名主体采用<code>驼峰命名</code>。方法名前不要有下划线(<code>_</code>)，我比较推荐的一种写法是如果是<code>私有方法</code>,用<code>字母</code>+<code>下划线</code>的形式；可以使用情态动词（<code>can</code>,<code>should</code>,<code>will</code>等）来阐明含义，不要使用<code>do</code>。</p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (void)requestNetwork;</span><br><span class="line">- (void)shouldRequstNetwork;</span><br><span class="line">私有方法</span><br><span class="line">- (void)wj_requestNetwork;</span><br></pre></td></tr></table></figure>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (void)doRequstNetork;</span><br><span class="line">- (void)_requstNetwork;</span><br></pre></td></tr></table></figure>
<h2 id="带多参数方法命名"><a href="#带多参数方法命名" class="headerlink" title="带多参数方法命名"></a>带多参数方法命名</h2><p>方法返回类型与（<code>-/+</code>）符合之间应该有一个<code>空格</code>。尽可能少用<code>&quot;and&quot;</code>这个词。遵循苹果风格,参数前应该有一个描述性<code>关键词</code>。</p>
<p>pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (void)setProductName:(NSString *)name;</span><br><span class="line"></span><br><span class="line">- (void)sendMessage:(NSString *)message ToClient:(NSString *)client;</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithWidth:(CGFloat)width height:(CGFloat)height;</span><br></pre></td></tr></table></figure>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-(void)setProductName:(NSString *)name;</span><br><span class="line"></span><br><span class="line">- (void)sendMessage:(NSString *)message :(NSString *)client;</span><br><span class="line"></span><br><span class="line">- (instancetype)initWithWidth:(CGFloat)width andHeight:(CGFloat)height;</span><br></pre></td></tr></table></figure>
<h2 id="类目命名"><a href="#类目命名" class="headerlink" title="类目命名"></a>类目命名</h2><p><code>类目命名</code>必须描述该类目的功能，且<code>首字母</code>必须<code>大写</code>。</p>
<p>Pereferred:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@interface UIViewController (JMAudioPlaying)</span><br></pre></td></tr></table></figure></p>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@interface UIViewController (audioPlaying)</span><br></pre></td></tr></table></figure>
<h2 id="类目方法命名"><a href="#类目方法命名" class="headerlink" title="类目方法命名"></a>类目方法命名</h2><p><code>类目方法命名</code>的格式：<code>小写字母</code>开头+<code>下划线</code>+<code>功能描述</code>;</p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (id)jm_itemAtIndex:(NSUInteger)index;</span><br></pre></td></tr></table></figure>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (id)itemAtIndex:(NSUInteger)index;</span><br></pre></td></tr></table></figure>
<p>这种格式是苹果官方推荐的，请参考<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW4" title="Avoid Category Method Name Clashes" target="_blank" rel="noopener">Avoid Category Method Name Clashes</a></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html" target="_blank" rel="noopener">Introduction to Coding Guidelines for Cocoa</a></li>
<li><a href="http://cocoadevcentral.com/articles/000082.php" target="_blank" rel="noopener">CocoaDevCentral</a></li>
<li><a href="https://github.com/github/objective-c-style-guide" title="Github" target="_blank" rel="noopener">Github</a></li>
</ul>
<h2 id="协议命名"><a href="#协议命名" class="headerlink" title="协议命名"></a>协议命名</h2><p>协议命名格式：类名+功能描述</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@protocol JMPickerViewDelegate &lt;NSObject&gt;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@protocol JMMessageData &lt;NSObject&gt;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h2 id="代理方法命名"><a href="#代理方法命名" class="headerlink" title="代理方法命名"></a>代理方法命名</h2><p>协议方法命名形式：某类某个对象做了什么。</p>
<p>Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@protocol JMPickerViewDelegate &lt;NSObject&gt;</span><br><span class="line">- (void)pickerView:(JMPickerView *)pickerView didTapRightButton:(UIButton *)button;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>Not Pereferred:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@protocol JMPickerViewDelegate &lt;NSObject&gt;</span><br><span class="line">- (void)didTapRightButton:(UIButton *)button;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>微信公众号：<code>嘀咕嘀咕（iOSSharers）</code></p>
<p><strong>扫二维码关注</strong></p>
<p><img src="http://i.imgur.com/TUz7oc9.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/05/23/code-style/" data-id="cjrjadyeg000dgd2hb0ygeu2j" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/05/24/设计模式之命令模式/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          设计模式之命令模式
        
      </div>
    </a>
  
  
    <a href="/2016/05/22/Bool/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">BOOL，你真的了解吗？</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/01/30/hello-md/">hello.md</a>
          </li>
        
          <li>
            <a href="/2016/05/24/设计模式之命令模式/">设计模式之命令模式</a>
          </li>
        
          <li>
            <a href="/2016/05/23/code-style/">良好代码风格是一种艺术 -- Objective-C</a>
          </li>
        
          <li>
            <a href="/2016/05/22/Bool/">BOOL，你真的了解吗？</a>
          </li>
        
          <li>
            <a href="/2016/03/23/strategy/">设计模式之策略模式</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>